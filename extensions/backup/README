Introduction
============

Backup extension was designed to achieve the following tasks:

1. Backup: Make a **Full** or **Database only** copy of the site
   periodically or on demand.

2. Restore: Do a restore from previously made backup copy.

3. Demo Install: Make an archive of a currently selected theme with
   all of its settings (database plus uploads directory).

   Auto Install: And gives the ability to use these settings at the
   time that theme was activated.

4. Migration: Move a WP site from one place to another.

Backup and Restore
==================

This two are the basic features of **Backup** extension.

Backup process works the following way:

1. All the necessary data are collected and stored in a .zip archive.
   For **Full Backup** this is content of a database and all of the
   files under ABSPATH directory. For **Database Backup** this is
   content of a database only.

2. That archive is moved from a temporary location into a persistent one.
   By default under a uploads/backup directory. But it can be anywhere
   like Dropbox or Amazon S3.

3. Information about this archive is registered into a database, so next
   time Backup page was opened it will be displayed after **Backup Archive**
   line.

Restore process works the following way:

1. The archive was fetched from a persistent location and stored under a
   /tmp directory.

2. It will be extracted and if contains database dump, then current database
   will be cleared and restored from the dump file. If there is WP files then
   whole directory under ABSPATH will be removed and restored from archive.

Backup extension was written such that it can be extended in only one way. By
writing custom **Storage Layer**.

Storage Layer
-------------

**Storage Layer** is a way **Backup Extension** stores backup archives. It should
implement FW_Backup_Storage_Interface and be under extensions/ directory.

For an example of implementation take a look at
**backup-storage-local** extension.

Demo Install
============

As was called previously **Demo Install** is a process of making an archive
of a currently selected theme packed with all of its settings (database plus
uploads directory). These settings are stored on **auto-install** directory
under theme parent directory.

Be warned that these feature by default is turned off and is enabled only when
**WP_DEBUG** constant is defined.

Being enabled on Backup page should appear button **Create Demo Install**.

Auto Install
============

**Auto Install** is the reverse process of **Demo Install**.

This feature is enabled only when current theme contains **auto-install**
directory inside of it.

Being enabled under a **Tools** menu appears **Auto Install** menu which
points to **Auto Install** page. That page displays button **Import Demo Content**
by clicking on which all tables from database will be dropped and replaced by
its copies from **auto-install/database.sql** file. Also **uploads** directory
will be replaced by the **auto-install/uploads** directory.

Migration
=========

Migration is a term representing moving WP site from one location
(e.g. http://localhost/coolsite) to another (e.g. http:://coolsite.com).
This is achieved by:

	1) making a full backup copy of the site
	2) moving it into uploads/backup/ directory on the site on new place

After opening Backup page new archive will be displayed under **Backup Archive** line.
